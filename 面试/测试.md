# 测试

产品的最后一个防线；利用测试方法、理论，自动化脚本进行测试；最终生成测试报告！

## 测试开发流程

- 需求设计
  - 细化需求
- 模块开发
  - 测试用例
  - 环境准备
- 模块测试
  - 测试执行
  - 问题反馈
- 整合出包
  - 回归测试
    - 回归测试是指修改了旧代码后，重新测试以确认修改没有引入新的错误或导致其他代码产生错误。
  - 产品打包
- 编写测试报告

|   | 黑盒测试  | 白盒测试  |
|---|---|---|
| 功能  | 针对功能的测试  | 针对结构的测试  |
| 优势  | 确保从用户角度出发进行测试  | 能够对程序内部的特定部位进行覆盖测试  |
| 应用  | 等价类划分、边界值分析法、因果图法、判定表法  | 语句覆盖、判定覆盖、条件覆盖、判定条件覆盖、条件组合覆盖、路径覆盖  |

白盒测试重点看代码的逻辑、算法、结构是否正确，要求必须懂得代码，需要编写测试用例。

**灰盒测试**：先黑盒，哪出现问题，再查看代码白盒

- 在**单元测试**时，白盒应用相对较多
- 在**集成测试**时，灰盒应用相对较多


## 设计测试用例时应该考虑哪些方面

个测试用例就是测试人员用以**测试被测软件的某个特性或特性组合的一组数据**。这组数据可能是从用户处得来的**实际的一组数据**，也可能是测试人员**专门设计出来的测试软件某些功能的一组数据**。

测试用例需要考虑的**四个基本要素**是输入、输出、操作和测试环境；另外，测试用例需要考虑的是测试类型（**功能、性能**、安全……）。除了对整体流程及功能注意外，还要注意强度测试、性能测试、压力测试、边界值测试、稳定性测试、安全性测试等多方面。

测试用例的基本要素：功能、功能项、测试目的、前提条件、测试要点、预期结果。

## 黑盒测试、测试用例设计方法

黑盒测试也称**功能测试或数据驱动测试**，它是在已知产品所应具有的功能，**通过测试来检测每个功能是否都能正常使用**。

在测试时，**把程序看作一个不能打开的黑盆子**，在完全不考虑程序内部结构和内部特性的情况下，测试者**在程序接口进行测试，它只检查程序功能是否按照需求规格说明书的规定正常使用**，程序是否能适当地接收输入数锯而产生正确的输出信息，并且保持外部信息（如数据库或文件）的完整性。

- 黑盒测试方法主要有等价类划分、边值分析、因—果图、错误推测等，主要用于**软件确认测试**。 
- “黑盒”法着**眼于程序外部结构、不考虑内部逻辑结构、针对软件界面和软件功能进行测试**。
- “黑盒”法是**穷举输入测试**，只有把所有可能的输入都作为测试情况使用，才能以这种方法查出程序中所有的错误。实际上测试情况有无穷多个，人们不仅要测试所有合法的输入，而且还要对那些**不合法但是可能的输入进行测试**。

主要考虑以下几个方面：

- **正确性**：计算结果，命名等方面
- **可用性**：是否可以满足软件的需求说明
- **边界条件**：输入部分的边界值，就是使用一般书中说的等价类划分，试试最大最小和非法数据等等。
- **性能**：正常使用的时间内系统完成一个任务需要的时间，多人同时使用的时候响应时间在可以接受范围内。
- **压力测试**：**多用户情况**可以考虑使用压力测试工具，建议将压力和性能测试结合起来进行。如果有负载平衡的话还要在服务器端打开监测工具 , 查看服务器 CPU 使用率，内存占用情况，如果有必要可以模拟大量数据输入，对硬盘的影响等等信息。如果有必要的话必须进行性能优化(软硬件都可以) 。
- **错误恢复**：错误处理，页面数据验证，包括突然间断电，输入脏数据等。
- **安全性测试**：防火墙、补丁包、杀毒软件等。




### 等价类划分

**把所有可能的输入数据，即程序的输入域划分成若干部分，然后从每一个子集中选取少数具有代表性的数据作为测试用例**。

该方法是一种重要的，常用的**黑盒测试用例设计方法**。等价类划分可有两种不同的情况：有效等价类和无效等价类。
- 有效等价类：对于程序的规格说明来说是合理的，**有意义的输入数据构成的集合**。利用有效等价类可检验程序是否实现了规格说明中所规定的功能和性能。
- 无效等价类：与有效等价类的定义相反。

**示例：超市买水果**

- 有效等价类：苹果、香蕉、桃子...

- 无效等价类：青菜、大米、饮料... 

### 边界值分析法

边界值分析方法是对等价类划分方法的补充。长期的测试工作经验告诉我们，**大量的错误是发生在输入或者输出范围的边界上**，而不是发生在输入输出范围的内部，因此针对各种边界情况设计测试用例，可以查出更多的错误。

使用边界值分析方法设计测试用例，首先应**确定边界情况**，通常输入和输出等价类的边界，就是应着重测试的边界情况，**应当选取正好等于，刚刚大于或刚刚小于边界的值作为测试数据**，而不是选取边界类中的典型值或任意值作为测试数据。

### 因果图方法

https://blog.csdn.net/weixin_43224539/article/details/90180035

因果图是一种简化了的逻辑图，**能直观的表明程序输入条件(原因)和输出动作(结果)之间的相互关系**。

因果图法是借助图形来设计测试用例的一种系统方法，特别适用于**被测试程序具有多种输入条件，程序的输出又依赖于输入条件的各种情况**。

前面介绍的等价类划分方法和边界值分析方法，都是**着重考虑输入条件，但未考虑输入条件之间的联系**。考虑输入条件之间的相互组合，可能会产生一些新的情况。因果图方法最终生成的是**判定表**，它适合于**检查程序输入条件之间的各种组合情况**。

#### 因果图设计测试用例的步骤

- 分析所有可能的输入和可能的输出
- 找出输入与输出之间的关系
- 画出因果图：恒等、与、或、非
- 把因果图转化成判定表
- 把判定表对应到每一个测试用例 

#### 示例

淘宝在双十一推出打折优惠活：订单已提交，订单金额大于300或有红包，则优惠。

- 对于这条业务规则，首先通过分析所有可能的输入和可能的输出，可以得到如下结果：
    - 输入：订单已提交，订单金额大于300，有红包
    - 输出：优惠，不优惠

- 然后进行第二步，找出输入域输出之间的关系，通过分析得出以下对应关系：
    - 订单已提交，订单金额大于300，则优惠
    - 订单已提交，订单金额小于等于300，无红包，不优惠
    - 订单已提交，订单金额小于等于300，有红包，优惠
    - 订单已提交，有红包，优惠
    - 订单未提交，不优惠

- 为了方便画出因果图和判定图，对所有输入和输出编号，编号如下:
    - 1：订单已提交
    - 2：订单金额大于300
    - 3：有红包
    - 21：优惠
    - 22：不优惠 

- 画因果图
<div align=center><img src=Pictures\因果图.png></div>

- 画判定表
<div align=center><img src=Pictures\判定表.png></div>

- 最终的测试用例：1,2,3,4,5(包括6,7,8)


### 判定表法

判定表（Decision Table）是**分析和表达多逻辑条件下执行不同操作的情况下的工具**。在程序设计发展的初期，判定表就已被当作编写程序的辅助工具了。由于它可以把复杂的逻辑关系和多种条件组合的情况表达得既具体又明确。

判定表通常由四个部分组成：
- 条件桩（Condition Stub）：列出了问题得所有条件。通常认为列出得条件的次序无关紧要。
- 动作桩（Action Stub）：列出了问题规定可能采取的操作。这些操作的排列顺序没有约束。
- 条件项（Condition Entry）：列出针对它左列条件的取值。在所有可能情况下的真假值。
- 动作项（Action Entry）：列出在条件项的各种取值情况下应该采取的动作。

规则：任何一个条件组合的特定取值及其相应要执行的操作，在判定表中贯穿条件项和动作项的一列就是一条规则。显然，判定表中列出多少组条件取值，也就有多少条规则，既条件项和动作项有多少列。

### 场景设计法(流程图)

现在的软件几乎都是**用事件触发来控制流程**的，**事件触发时的情景便形成了场景**，而同一事件不同的触发顺序和处理结果就形成**事件流**，该方法可以比较生动地描绘出事件触发时的情景，有利于测试设计者设计测试用例，使测试用例更容易理解和执行。

<div align=center><img src=Pictures\场景设计.png width=50%></div>

### 错误猜测法

**基于经验和直觉，找出程序中你认为会出现的错误**，有针对性地设计测试用例。

经验可能来自于对某项业务的测试较多，也可以来自**售后用户的反馈意见**，或者从故障管理库中整理出bug，整理出产品越往哪些地方越容易出现问题，**问题越多的地方，潜在的bug越多**。

## 白盒测试

白盒测试也称**结构测试或逻辑驱动测试**，它是知道产品内部工作过程，可通过测试来检测产品内部动作是否按照规格说明书的规定正常进行，**按照程序内部的结构测试程序，检验程序中的每条通路是否都有能按预定要求正确工作**，而不顾它的功能，白盒测试的主要方法有逻辑驱动、基路测试等，主要用于软件验证。

白盒测试的方法：总体上分为**静态方法**和**动态方法**两大类。

静态分析是一种**不通过执行程序而进行测试的技术**。静态分析的关键功能是**检查软件的表示和描述是否一致，没有冲突或者没有歧义**。

动态分析的主要特点是当软件系统在模拟的或真实的环境中执行之前、之中和之后，对软件系统行为的分析。动态分析包含了程序在受控的环境下使用特定的期望结果进行正式的运行。它显示了一个系统在检查状态下是正确还是不正确。在动态分析技术中，最重要的技术是路径和分支测试。**覆盖测试方法属于动态分析方法**。

### 语句覆盖

**设计若干个测试用例，运行被测程序，使得每一可执行语句至少执行一次**。这里的“若干个”，意味着使用测试用例越少越好。语句覆盖率的公式可以表示如下：

语句覆盖率=被评价到的语句数量/可执行的语句总数 x 100%

### 判定覆盖

**使设计的测试用例保证程序中每个判断的每个取值分支（true or false）至少经历一次**。

### 条件覆盖

**条件覆盖是指选择足够的测试用例，使得运行这些测试用例时，判定中每个条件的所有可能结果至少出现一次，但未必能覆盖全部分支。**

条件覆盖要检查每个符合子表达式值为真和假两种情况，要独立衡量每个子表达式的结果，以**确保每个子表达式的值为真和假两种情况都被测试到**。

### 判定条件覆盖

判定条件覆盖就是设计足够的测试用例，**使得判断中每个条件的所有可能取值至少执行一次，同时每个判断的所有可能判断结果至少执行，即要求各个判断的所有可能的条件取值组合至少执行一次**。

### 条件组合覆盖

在白盒测试法中，选择足够的测试用例，**使所有判定中各条件判断结果的所有组合至少出现一次**，满足这种覆盖标准成为条件组合覆盖。

### 路径覆盖

**每条可能执行到的路径至少执行一次**


### 总结

语句覆盖是一种最弱的覆盖，判定覆盖和条件覆盖比语句覆盖强，满足判定/条件覆盖标准的测试用例一定也满足判定覆盖、条件覆盖和语句覆盖，条件组合覆盖是除路径覆盖外最强的，路径覆盖也是一种比较强的覆盖，但未必考虑判定条件结果的组合，并不能代替条件覆盖和条件组合覆盖。



## 淘宝登录界面测试用例设计


首先你要先**了解客户的需求**
- 登录界面应该是**弹出窗口式的还是直接在网页里面的**。
- 用户名的长度、和密码的强度（就是密码组合起来后的简单程度）等。
- 用户对界面的美观是不是有特殊的要求（UI界面的测试）。
- 剩下的就是设计用例了，等价类，边界值等等。

请记住一点，任何测试不管是什么要需要从了解需求开始。

### 功能测试

- 什么都不输入操作提交按钮后代码的处理动作是如何的（**非空检查**）
- 输入正确的用户名和密码，点击提交按钮后验证是否正确登录。（**正常输入**）
- 输入错误的用户名或者密码验证点击登录后时候会提示失败（**错误校验**）
- 登录成功后是能否跳转到正确的页面（**功能校验**）
- 记住用户名的功能
- 密码是否加密显示（使用星号或者圆点等）
- 输入密码的时候大写键盘开启的时候是否要有提示

### 界面测试

- 输入正确的用户名个密码后登陆成功跳转到新页面的不能超过5秒
- 页面布局是否合理、美化等

### 性能测试

- 打开登陆页面后需要几秒
- 输入正确的用户名和密码后登陆成功跳转到新页面不超过的上限时间

### 安全性测试

- 错误登录的次数限制（防止暴力破解）
- 是否支持在多台机器上登录

### 可用性测试

- 输入用户名和密码后按回车是够可以登录
- 输入框能否可以以tab键切换

### 兼容性测试

- 主流的浏览器能否显示正常以及功能正常
- 不同的平台是否正常工作，比如Windows、MAC等
- 不同的移动设备上是否能够正常工作，如iOS、Android等环境
- 不同的分辨率下的UI显示是否正常

## 常用输入框的测试

### 针对普通输入框的测试用例
1、输入中英文空格，字符串中间空格，首尾空格，回车换行符
2、字符长度校验，输入是缓冲区溢出的超长字符，默认字符，空字符，特殊字符，尤其是系统保留字符
3、根据的页面使用的不同程序语言，输入不同的语言字符串，如HTML格式语言，JS函数格式等
4、输入全角/半角的数字，大小写英文
5、输入特殊字符串如null，空格，回车转义符
6、若是必填项只输入若干个空格，程序应友好提示


### 针对数值型输入框的测试用例
1、输入整数首位、末位为0
2、输入正负数值
3、输入0、小数、小数末位为0
4、输入多个小数点
5、输入小数位数大于小于等于要求的有效位
6、输入非数值型数据，程序应提示错误；若字段禁止直接输入非数值型数据，可尝试拷贝粘贴的方式，保存时应无法保存，并给出相应提示

### 针对日期型输入框的测试用例
1、日输入0，1，30，31，32
2、根据闰年，大小月份，日输入28，29，30，31
3、月输入0，1，12，13
4、时输入00，23，24
5、分秒输入00，59，60
6、日期格式校验，根据项目要求而定是否合法
7、输入汉字、英文、字符等特殊符号
8、另外需核实系统中所涉及日期时间是否取自服务器

### 针对上传文件的测试用例
1、页面校验，如页面美观易用，按钮文字、说明文字是否正确，必填项的标识是否正确，对必填项是否校验
2、根据系统要求对文件类型、文件大小做校验，可从等价类、边界值进行分析，上传失败的要求有明确的提示信息
3、上传一个0kb的文件
4、上传一个已被损坏的文件，比如将1.txt，改成1.jpg后上传
5、上传一个被其他程序使用，或已打开处于编辑中的文件
6、是否可手动输入路径，手动输入一个存在或不存在的文件地址
7、上传文件是否支持中文路径，中文名称
8、文件名称的最大值、最小值、特殊字符（包含空格），使用程序语句是否会对齐造成影响
9、上传文件是否可以同时上传多个，可否可选择文件夹上传其对应的文件
10、上传文件数超过最大值是在提交前还是提交后校验
11、上传文件容错性测试，如检查覆盖同文件操作
12、文件文件异常性测试，如硬盘空间不足
13、上传文件速率性能测试，检查系统资源占用
14、上传文件安全性测试，如上传常见木马
15、上传文件特性测试，如是否支持断点续传
16、上传文件后，检查是否与原文件一致，包含目录设置等
17、上传文件是否能正确打开

### 针对下载文件的测试用例
1、右键另存为是否可正确下载文件，工具下载是否正确
2、单击下载是否是提示下载还是页面打开
3、对于本机没有安装工具的文件是否能打开
4、对于直接在页面内打开的内容是否显示正常，页面美观性
5、保存到本地是否能正确显示
6、下载次数是否被正确记录，另外取消下载是否会记录下载次数
7、后台设置了下载权限的文件是否可以被正确看到，是否可正确下载
8、下载文件是否支持多个文件同时下载，或同一文件多次下载
9、下载文件异常性测试，如本地磁盘空间不足
10、下载文件速率性能测试
11、下载文件特性测试，如是否支持断点下载
12、下载文件后，检查是否与原文件一致，是否能正确打开

### 针对用户注册登录的测试用例

#### 界面测试
1、布局是否合理，输入框和按钮是否对齐，界面风格是否统一，有没错别字

#### 功能测试——输入密码
1、用户名和密码都有最大和最小长度，根据边界值分析，取上点、离点，内点
2、用户名和密码都有字符类型要求，根据等价类分析，划分几个无效及有效等价类
3、验证必填项为空是否可以正常进入
4、用户名密码输入特殊字符，如/’ “\ 或程序语言等
5、输入密码时，大写键盘开启时要求有提示信息
6、输入的密码是否密文显示
7、改变已存在用户的用户名和密码的大小写来登录
8、登录后是否会用明文传递参数
9、数据库中不存在的用户名，或存在的用户名，错误的密码来登录
10、输入的正确的用户名或密码前后中间有空格
11、登录失败后，不能记录密码的功能
12、选中记住密码是否可以保存密码，重新打开是否保存着正确的密码
13、选中记住密码后换一个账户，保存的密码是否正确地与账号对应
14、登录失败后，已经输入的用户名和密码一般需要清空
15、登录后保存里面的链接，关了浏览器直接复制链接看能不能访问

#### 性能测试
1、打开登录页面，需要几秒，输入正确的用户名和密码成功跳转后，需要几秒
2、多用户并发登录是否达到设计要求
3、登录达到需求上线，系统稳定工作时间是否达到要求

#### 安全性测试
1、密码一般要求不可以复制粘贴
2、用户名和密码是否通过加密的方式，发送给服务器
3、用户名和密码的验证，应该是服务端和客户端同时验证
4、用户名和密码的输入框，要求屏蔽SQL注入，如输入or 1=1
5、错误登录次数限制，防止暴力破解
6、Cookie有效时间验证
7、是否允许多用户同时登录
8、使用已被删除或禁用的账号登录

#### 易用性测试
1、检验是否支持tab和enter键

#### 兼容性测试
1、主流的浏览器下能否正常显示，功能是否正常
2、不同的平台能否正常工作
3、移动设备上是否正常工作