# 什么是回溯算法

回溯算法本质其实就是**枚举**，在给定的枚举集合中，不断从其中尝试搜索找到问题的解，如果在搜索过程中发现不满足求解条件 ，则「回溯」返回，尝试其它路径继续搜索解决，这种**走不通就回退再尝试其它路径**的方法就是回溯法，许多复杂的，规模较大的问题都可以使用回溯法，所以回溯法有「通用解题方法」的美称。

# 回溯算法解题通用套路

为了有规律地求解问题，我们把问题分成多个阶段，每个阶段都有多个解，随机选择一个解，进入下一个阶段，下一个阶段也随机选择一个解，再进入下一个阶段...

<div><img src=Pictures\回溯算法.jpg width=80%></div>

每个阶段选中的解都放入一个 「已选解集合」 中，并且要判断 「已选解集合」是否满足问题的条件（base case）,有两种情况

- 如果「已选解集合」满足问题的条件，则将 「已选解集合」放入「结果集」中，并且「回溯」换个解再遍历。
- 如果不满足，则「回溯」换个解再遍历

通过以上分析我们不难发现回溯算法本质上就是**深度优先遍历**，它一般解决的是树形问题（问题分解成多个阶段，每个阶段有多个解，这样就构成了一颗树），所以判断问题是否可以用回溯算法的关键在于它**是否可以转成一个树形问题**。

另外我们也发现如果能缩小每个阶段的可选解，就能让问题的搜索规模都缩小，这种就叫**剪枝**，通过剪枝能有效地降低整个问题的搜索复杂度！

回溯算法的基本套路如下：

- 将问题分成多个阶段，每个阶段都有多个不同的解，这样就将问题转化成了树形问题，这一步是问题的关键！如果能将问题转成树形问题，其实就成功了一半，需要注意的是树形问题要明确**终止条件**，这样可以在DFS的过程中及时终止遍历，达到剪枝的效果。
- 套用上述回溯算法的解题模板，进行深度优先遍历，直到找到问题的解。